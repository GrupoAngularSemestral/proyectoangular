<div class="habit-list">
  <!-- Formulario para agregar/editar h√°bito -->
  <div class="habit-form">
    <h3>{{ editingHabitId ? 'Editar H√°bito' : 'Agregar Nuevo H√°bito' }}</h3>
    
    <form (ngSubmit)="editingHabitId ? updateHabit() : addHabit()">
      <div class="form-group">
        <label for="name">Nombre del h√°bito:</label>
        <input 
          id="name" 
          type="text" 
          [(ngModel)]="newHabit.name" 
          name="name" 
          placeholder="Ej: Hacer ejercicio"
          required>
      </div>

      <div class="form-group">
        <label for="type">Tipo:</label>
        <select id="type" [(ngModel)]="newHabit.type" name="type">
          <option value="exercise">Ejercicio</option>
          <option value="health">Salud</option>
          <option value="water">Agua</option>
          <option value="sleep">Sue√±o</option>
          <option value="custom">Personalizado</option>
        </select>
      </div>

      <div class="form-group">
        <label for="goal">Meta:</label>
        <input 
          id="goal" 
          type="number" 
          [(ngModel)]="newHabit.goal" 
          name="goal" 
          min="1" 
          required>
      </div>

      <div class="form-group">
        <label for="unit">Unidad:</label>
        <input 
          id="unit" 
          type="text" 
          [(ngModel)]="newHabit.unit" 
          name="unit" 
          placeholder="Ej: minutos, veces, vasos">
      </div>

      <div class="form-group">
        <label for="frequency">Frecuencia:</label>
        <select id="frequency" [(ngModel)]="newHabit.frequency" name="frequency">
          <option value="daily">Diario</option>
          <option value="weekly">Semanal</option>
          <option value="monthly">Mensual</option>
        </select>
      </div>

      <div class="form-actions">
        <button type="submit" class="btn btn-primary">
          {{ editingHabitId ? 'Actualizar' : 'Agregar' }} H√°bito
        </button>
        <button type="button" class="btn btn-secondary" (click)="resetForm()" *ngIf="editingHabitId">
          Cancelar
        </button>
      </div>
    </form>
  </div>

  <!-- Lista de h√°bitos -->
  <div class="habits-display">
    <ng-container *ngIf="habits.length > 0; else noHabits">
      <ul class="habit-detailed-list">
        <li *ngFor="let habit of habits" class="habit-detailed-item">
          <div class="habit-header">
            <span class="habit-name">{{ habit.name }}</span>
            <span class="habit-type">({{ habit.type }})</span>
          </div>
          <div class="habit-details">
            <span><b>Meta:</b> {{ habit.goal }} {{ habit.unit }}</span>
            <span><b>Frecuencia:</b> {{ habit.frequency }}</span>
            <span class="habit-date"><b>Creado:</b> {{ habit.createdAt | date:'shortDate' }}</span>
          </div>
          <div class="habit-actions">
            <button (click)="editHabit(habit)" class="edit-btn">‚úèÔ∏è Editar</button>
            <button (click)="deleteHabit(habit.id)" class="delete-btn">üóëÔ∏è Eliminar</button>
          </div>
        </li>
      </ul>
    </ng-container>
    <ng-template #noHabits>
      <div class="no-habits-msg">No hay ning√∫n h√°bito registrado.</div>
    </ng-template>
  </div>
</div>

